# AI Call Center â€” Kazakhtelecom MVP

Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ·Ğ²Ğ¾Ğ½ĞºĞ¾Ğ² Ğ´Ğ»Ñ ĞšĞ°Ğ·Ğ°Ñ…Ñ‚ĞµĞ»ĞµĞºĞ¾Ğ¼ (Kcell, Activ) Ñ AI-Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ±Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¸ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ğ¼.

## ğŸš€ Milestone 1 (Frontend-First) â€” COMPLETED

### âœ… Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾

#### Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
- **Dashboard** (`/dashboard`) â€” KPI, Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸, Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ·Ğ²Ğ¾Ğ½ĞºĞ¸
- **Upload** (`/upload`) â€” Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ°ÑƒĞ´Ğ¸Ğ¾ Ñ drag-n-drop, Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
- **Calls** (`/calls`) â€” ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… Ğ·Ğ²Ğ¾Ğ½ĞºĞ¾Ğ² Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹
- **Call Details** (`/calls/:id`) â€” Ğ¿Ğ»ĞµĞµÑ€, Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ‚, Ğ°ÑƒĞ´Ğ¸Ñ‚, Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
- **Clients** (`/clients`) â€” Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸ĞµĞ¹ Ğ·Ğ²Ğ¾Ğ½ĞºĞ¾Ğ²
- **Groups** (`/groups`) â€” Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ Ğ·Ğ²Ğ¾Ğ½ĞºĞ¾Ğ²
- **Tickets** (`/tickets`) â€” ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°Ğ¼Ğ¸ Ğ¸ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸ÑĞ¼Ğ¸
- **Users** (`/users`) â€” ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸ Ğ¸ Ñ€Ğ¾Ğ»ÑĞ¼Ğ¸
- **Audits** (`/audits`) â€” Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ° Ğ¸ compliance
- **Settings** (`/settings`) â€” Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ», Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¹

#### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
- `AudioPlayer` â€” ÑĞ¸Ğ¼ÑƒĞ»ÑÑ†Ğ¸Ñ Ğ¿Ğ»ĞµĞµÑ€Ğ° Ñ seek slider
- `TranscriptViewer` â€” ĞºĞ»Ğ¸ĞºĞ°Ğ±ĞµĞ»ÑŒĞ½Ñ‹Ğµ utterances Ñ Ñ‚Ğ°Ğ¹Ğ¼ĞºĞ¾Ğ´Ğ°Ğ¼Ğ¸
- `AuditCard` â€” Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ score breakdown
- `CallsTable` â€” Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ·Ğ²Ğ¾Ğ½ĞºĞ¾Ğ² Ñ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¾Ğ¹
- `KPICard`, `CallsChart`, `ScoreChart` â€” Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´ Ğ²Ğ¸Ğ´Ğ¶ĞµÑ‚Ñ‹
- ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ UI kit Ğ½Ğ° Ğ±Ğ°Ğ·Ğµ **shadcn/ui**

#### Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
- **WebSocket hook** (`useWebSocket.ts`) â€” Ğ´Ğ»Ñ real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹
- **Mock data** (`mockData.ts`) â€” Ñ€ĞµĞ°Ğ»Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ„Ğ¸ĞºÑÑ‚ÑƒÑ€Ñ‹
- **Design system** â€” Kazakhtelecom branding, semantic tokens
- **TypeScript** â€” ÑÑ‚Ñ€Ğ¾Ğ³Ğ°Ñ Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (types/index.ts)
- **Routing** â€” React Router Ñ layout wrapper

### ğŸ“‹ TODO: M2-M5 (Backend Integration)

#### M2: Backend Minimal (Est. 2-3 weeks, ~80 hours)

**Lovable Cloud Setup:**
- [ ] Enable Lovable Cloud (Supabase backend) â€” **1h**
- [ ] Create database schema (calls, transcripts, audits, clients, tickets, users, kpi_rules) â€” **4h**
- [ ] Setup Row Level Security policies â€” **2h**
- [ ] Configure Storage buckets for audio files â€” **1h**

**Edge Functions (Backend API):**
- [ ] `/api/calls/upload` â€” multipart upload to Storage â€” **3h**
- [ ] `/api/calls/webhook` â€” receive provider callbacks â€” **2h**
- [ ] `/api/calls` (list with filters) â€” **2h**
- [ ] `/api/calls/:id` (details with transcript + audit) â€” **2h**
- [ ] `/api/transcripts/:id` (PATCH for inline editing) â€” **2h**
- [ ] `/api/audits/:id/rerun` â€” trigger re-audit â€” **2h**
- [ ] `/api/clients/:phone` â€” client profile aggregation â€” **3h**
- [ ] `/api/tickets` (CRUD) â€” **4h**
- [ ] `/api/users` (CRUD + role management) â€” **4h**
- [ ] `/api/settings/kpi-rules` (CRUD) â€” **3h**

**Worker Simulation (Background Jobs):**
- [ ] Create `process_call` edge function triggered by upload â€” **4h**
- [ ] Mock STT adapter (returns dummy transcript) â€” **2h**
- [ ] Mock audit engine (calculates score from rules) â€” **4h**
- [ ] Emit Realtime events on status change â€” **2h**

**Frontend Integration:**
- [ ] Connect Upload page to real API â€” **3h**
- [ ] Connect Dashboard to real data (React Query) â€” **3h**
- [ ] Connect Calls list + filters â€” **3h**
- [ ] Connect Call Details with audio streaming â€” **4h**
- [ ] Integrate WebSocket for real-time updates â€” **3h**
- [ ] Connect Client profile to backend â€” **2h**
- [ ] Connect all other pages to backend â€” **6h**

**Testing & Documentation:**
- [ ] Write API integration tests â€” **6h**
- [ ] Write component tests for critical paths â€” **6h**
- [ ] Update README with backend setup â€” **2h**

---

#### M3: Audit & Rules Engine (Est. 2 weeks, ~60 hours)

**Audit Engine:**
- [ ] Implement rule-based scoring system â€” **8h**
- [ ] Script compliance checker (required phrases detection) â€” **6h**
- [ ] Topic classifier (keyword matching + simple NLP) â€” **6h**
- [ ] Forbidden words detector with severity levels â€” **4h**
- [ ] Resolution bonus calculator â€” **3h**

**KPI Rules Admin UI:**
- [ ] Visual rule builder in Settings page â€” **8h**
- [ ] Add/Edit/Delete rules with JSON preview â€” **4h**
- [ ] Multi-tenant rule sets (Kazakhtelecom/Kcell/Activ) â€” **4h**
- [ ] Apply rules on audit re-run â€” **3h**

**Advanced Features:**
- [ ] Manual review workflow (supervisor override) â€” **6h**
- [ ] Audit history and version tracking â€” **4h**
- [ ] Export audit reports (PDF/CSV) â€” **4h**

---

#### M4: Stability & Infrastructure (Est. 1-2 weeks, ~40 hours)

**Performance:**
- [ ] Optimize database queries (indexes, views) â€” **4h**
- [ ] Implement pagination for large lists â€” **3h**
- [ ] Audio file compression pipeline â€” **4h**
- [ ] CDN setup for audio streaming â€” **2h**

**Security:**
- [ ] Implement user roles table (avoid RLS recursion) â€” **4h**
- [ ] Add authentication middleware â€” **3h**
- [ ] Secure file upload validation â€” **2h**
- [ ] Rate limiting on API endpoints â€” **2h**

**Monitoring & Logging:**
- [ ] Setup error tracking (Sentry) â€” **2h**
- [ ] Add structured logging â€” **3h**
- [ ] Create admin analytics dashboard â€” **4h**

**CI/CD:**
- [ ] GitHub Actions for tests â€” **3h**
- [ ] Automated deployment pipeline â€” **2h**
- [ ] Environment management (staging/prod) â€” **2h**

**Documentation:**
- [ ] OpenAPI spec generation â€” **4h**
- [ ] Developer onboarding guide â€” **2h**
- [ ] Architecture diagrams â€” **2h**

---

#### M5: AI Integration (Optional, Est. 2 weeks, ~50 hours)

**STT Integration:**
- [ ] Replace mock with real STT provider (Whisper/AssemblyAI) â€” **8h**
- [ ] Add diarization support (speaker separation) â€” **6h**
- [ ] Confidence thresholding and highlights â€” **3h**

**NLP Enhancements:**
- [ ] Integrate OpenAI/Gemini for semantic analysis via Lovable AI â€” **6h**
- [ ] Sentiment detection per utterance â€” **4h**
- [ ] Topic classification with ML model â€” **6h**
- [ ] Intent recognition â€” **4h**

**Advanced Audit:**
- [ ] Tone analysis (friendly/neutral/hostile) â€” **4h**
- [ ] Escalation prediction â€” **4h**
- [ ] Personalized coaching recommendations â€” **5h**

---

## ğŸ›  Tech Stack

**Frontend:**
- React 18 + TypeScript
- Vite
- TailwindCSS (Kazakhtelecom design system)
- shadcn/ui components
- React Router
- React Query (TanStack Query)
- Recharts (visualizations)
- Lucide icons

**Backend (via Lovable Cloud):**
- Supabase (PostgreSQL)
- Supabase Storage (audio files)
- Supabase Realtime (WebSocket)
- Edge Functions (Deno)

**Future AI Integration:**
- Lovable AI Gateway (Gemini/GPT)
- Whisper API or AssemblyAI (STT)

---

## ğŸš¦ Local Development

```bash
# Install dependencies
npm install

# Start dev server
npm run dev

# Build for production
npm run build

# Run tests
npm test

# Lint
npm run lint
```

---

## ğŸ“ Environment Variables

For M2+, create `.env.local`:

```bash
# Lovable Cloud / Supabase
VITE_SUPABASE_URL=your_project_url
VITE_SUPABASE_PUBLISHABLE_KEY=your_anon_key

# AI Integration (M5)
OPENAI_API_KEY=your_openai_key  # Server-side only
ASSEMBLYAI_API_KEY=your_key     # Server-side only
```

---

## ğŸ¯ Acceptance Criteria (M1 âœ…)

- [x] Multi-page SPA with routing (Dashboard, Upload, Calls, etc.)
- [x] Upload UI with drag-n-drop and queue simulation
- [x] Calls list + Details page (audio player + transcript viewer)
- [x] Client profile page with call history
- [x] All pages responsive and accessible
- [x] Mock data for development
- [x] WebSocket hook for future real-time integration
- [x] Design system with Kazakhtelecom branding
- [x] TypeScript strict mode

---

## ğŸ“ Support

For backend setup (M2), enable **Lovable Cloud** in project settings to get:
- PostgreSQL database
- File storage
- Real-time subscriptions
- Edge Functions API

**Lovable Cloud failed to enable?** Try again or contact support.

---

## ğŸ¢ Multi-Tenant Support

System supports three organizations:
- **Kazakhtelecom** (parent company)
- **Kcell** (subsidiary)
- **Activ** (subsidiary)

Role-based access control:
- **Admin** â€” full access, manage KPI rules
- **Supervisor** â€” view all calls, manual review
- **Operator** â€” view own calls only

---

## ğŸ“š Architecture Notes

### Current (M1 â€” Frontend Only)
```
src/
  pages/          â€” Route components
  components/     â€” Reusable UI (AudioPlayer, TranscriptViewer, etc.)
  hooks/          â€” useWebSocket, future custom hooks
  lib/            â€” mockData.ts, utils
  types/          â€” TypeScript interfaces
```

### Future (M2+ â€” Fullstack)
```
Lovable Cloud (Supabase):
  Database (PostgreSQL)
    â”œâ”€ calls
    â”œâ”€ transcripts
    â”œâ”€ audits
    â”œâ”€ clients
    â”œâ”€ tickets
    â”œâ”€ users
    â””â”€ kpi_rules
  
  Storage
    â””â”€ audio-files/
  
  Edge Functions
    â”œâ”€ upload
    â”œâ”€ webhook
    â”œâ”€ process_call (worker)
    â””â”€ audit_engine
  
  Realtime
    â””â”€ call.updated events
```

---

## ğŸ¨ Design System

Colors (HSL):
- **Primary (brand-blue):** `hsl(215, 100%, 34%)` (#0047AB)
- **Success:** `hsl(134, 57%, 43%)` (#28A745)
- **Danger:** `hsl(354, 70%, 54%)` (#DC3545)

Typography:
- **Headings:** Inter Semi-Bold / Bold
- **Body:** Inter Regular

Animations:
- fade-in, slide-up, scale-in (see tailwind.config.ts)

---

## ğŸ”’ Security TODO (M2-M4)

- [ ] User roles table (avoid RLS recursion)
- [ ] JWT authentication
- [ ] File upload validation (MIME type, size)
- [ ] Rate limiting on API
- [ ] Secrets management for API keys
- [ ] Input sanitization

---

## ğŸ“Š Performance Targets (M4)

- Dashboard load: < 2s
- Audio playback latency: < 500ms
- Transcript search: < 100ms
- Upload â†’ processing notification: < 5s (real-time)

---

## ğŸ§ª Testing Strategy

**M1 (Current):**
- Manual testing via Storybook (future)
- Visual testing in browser

**M2-M4:**
- Unit tests: Jest + React Testing Library
- Integration tests: Supabase Edge Functions
- E2E tests: Playwright (critical user flows)
- Load testing: k6 (audio upload stress test)

---

## ğŸ“ˆ Monitoring (M4)

- Error tracking: Sentry
- Performance: Supabase logs + custom analytics
- User behavior: Mixpanel or PostHog
- Uptime: Supabase built-in monitoring

---

## ğŸŒ Deployment

**Current (M1):**
- Frontend: Lovable hosting (automatic)

**Future (M2+):**
- Backend: Lovable Cloud (Supabase) â€” automatic
- CDN: Cloudflare (audio files)
- CI/CD: GitHub Actions

---

## ğŸ¤ Contributing

1. Create feature branch
2. Make changes
3. Test locally
4. Submit PR with description
5. Wait for review

---

## ğŸ“„ License

Proprietary â€” Kazakhtelecom internal use only.

---

**Status:** M1 Complete âœ… | M2-M5 Pending Backend Setup
